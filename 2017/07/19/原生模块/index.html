<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <link rel="shortcut icon" href="/images/mylogo.jpg">
    <title>ZDM的杂货铺</title>
    <link rel="stylesheet" href="/css/fontAawesome/css/font-awesome.css">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header class="header">
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="/images/mylogo.png" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarColor01">
                <ul class="navbar-nav mr-auto">
                    
                    <li class="menu-item">
                        <a href="/" class="nav-link" >首页</a>
                    </li>
                    
                    <li class="menu-item">
                        <a href="/archives" class="nav-link" >归档</a>
                    </li>
                    
                    <li class="menu-item">
                        <a href="/about" class="nav-link" >关于</a>
                    </li>
                    
                    <li class="menu-item">
                        <a href="https://github.com/zhaodongming" class="nav-link" >开源地址</a>
                    </li>
                    

                </ul>
            </div>
        </div>
    </nav>
</header>
<main class="main">
    
<section>
    <div  class="container">
        <div class="main">
            <article class="post">
                <div class="posticon">
                    <img src="http://ziyuan.qikepower.com/nodejslogo.jpg" alt="">
                </div>
                <div class="posttitle">
                    <h1>Node.js常用原生模块+包和NPM</h1>
                    <p>by 明 on 2017-07-19 </p>
                </div>
                <div class="post-content">
                    <h3 id="Node-js常用原生模块"><a href="#Node-js常用原生模块" class="headerlink" title="Node.js常用原生模块"></a>Node.js常用原生模块</h3><h2 id="Console模块"><a href="#Console模块" class="headerlink" title="Console模块"></a>Console模块</h2><p>Node.js中的console模块提供了一种控制台调试输出机制，类似于Chrome浏览器中的console对象的功能。<br>该模块向外界输出两个成员：<br>console class:可用于向任意Node.js输出流对象中执行输出;<br>Global.console 实例：可用于向stdout和stderr中执行输出。</p>
<a id="more"></a>
<p>Global.console对象</p>
<p>1.Global.console底层实现方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//global.console 对象的创建过程：</span><br><span class="line">global.console=new Console(process.stdout,process.stderr);</span><br></pre></td></tr></table></figure>
<p>2.Global.console底层实现方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const out=fs.creactWriteStream(‘./appout.log’);</span><br><span class="line">const err=fs.creactWriteStream(‘./apperr.log’);</span><br><span class="line">const logger=new Console(out,err);</span><br><span class="line">var count=5;</span><br><span class="line">logger.log(‘count:%d’,count);</span><br><span class="line">logger.error(‘count:%d’,count);</span><br></pre></td></tr></table></figure>
<h2 id="OS模块"><a href="#OS模块" class="headerlink" title="OS模块"></a>OS模块</h2><p>OS模块提供了很多用于获得当前操作系统信息的方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const os=require(<span class="string">'os'</span>);</span><br><span class="line">os.EOL						//代表OS End-Of-Line的常量</span><br><span class="line">os.tmpdir( )				//返回OS的临时目录</span><br><span class="line">os.hostname( )			    //返回当前主机名称</span><br><span class="line">os.platform( )			    //返回当前OS平台类型</span><br><span class="line">os.uptime( )				//返回当前已经运行的时间，单位秒</span><br><span class="line">os.loadavg( )				//返回1分钟、5分钟、15分钟的系统平均负载</span><br><span class="line">os.totalmem( )			    //返回OS总内存大小，单位字节</span><br><span class="line">os.freemem()				//返回OS当前闲置内存大小，单位字节</span><br><span class="line">os.cpus( )					//返回CPU内核信息</span><br><span class="line">os.networkInterfaces( )	    //返回多有的网络接口信息</span><br></pre></td></tr></table></figure>
<h2 id="Readline模块"><a href="#Readline模块" class="headerlink" title="Readline模块"></a>Readline模块</h2><p>Readline模块提供的Interface对象，可用于从标准输入对象或者其他输入流对象中一行一行的读取数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const readline=require(‘readline’);</span><br><span class="line">var reader=readline.createInterface(&#123;</span><br><span class="line">    input:process.stdin,</span><br><span class="line">    output:process.stdout</span><br><span class="line">&#125;);</span><br><span class="line">reader.question(‘Input User Name:’,(line)=&gt;&#123;</span><br><span class="line">    console.log(‘Logging In as User %s ..’,line);</span><br><span class="line">    //使用完毕必须关闭，否则解释器不会退出</span><br><span class="line">    reader.close();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Interface对象<br>Interface对象提供了下述成员可供使用：<br>属性成员：</p>
<blockquote>
<ul>
<li>input：指定用于读取数据的来源</li>
<li>output：指定写出数据的目标</li>
</ul>
</blockquote>
<p>方法成员：</p>
<blockquote>
<ul>
<li>write():向指定的output对象中写出数据</li>
<li>close():关闭输入流</li>
<li>setPrompt()：设置输入提示符</li>
<li>prompt()：输出提示符信息</li>
</ul>
</blockquote>
<p>事件成员：</p>
<blockquote>
<ul>
<li>line:读取到一行数据</li>
<li>end:输入流对象读取到末尾</li>
<li>close:输入流被关闭</li>
</ul>
</blockquote>
<p>Readilne模块示例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const rl=require(<span class="string">'readline'</span>);</span><br><span class="line">const fs=require(<span class="string">'fs'</span>);</span><br><span class="line">var file=fs.createReadStream(<span class="string">'out.log'</span>);</span><br><span class="line">var reader=rl.createInterface(file,process.stdout);</span><br><span class="line">var num=0;</span><br><span class="line">reader.on(<span class="string">'line'</span>,(data)=&gt;&#123;</span><br><span class="line">    num++;</span><br><span class="line">    console.log(num+<span class="string">':'</span>+data);</span><br><span class="line">&#125;);</span><br><span class="line">reader.on(<span class="string">'end'</span>,()=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">'readering end'</span>)</span><br><span class="line">&#125;);</span><br><span class="line">reader.on(<span class="string">'close'</span>,()=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">'closeing...'</span>);</span><br><span class="line">    process.exit(0);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Query-String模块"><a href="#Query-String模块" class="headerlink" title="Query String模块"></a>Query String模块</h2><p>Query String模块提供了处理URL中的查询字符串部分的相关操作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const querystring=require(‘querystring’);</span><br><span class="line">var qs=’cid=%E4BD%93%E8%82%B2&amp;siz=10&amp;pno=2’;</span><br><span class="line">//从查询字符串中机械出来的数据对象</span><br><span class="line">console.log(querystring.parse(qs));</span><br><span class="line"></span><br><span class="line">var data=&#123;cid:’体育’,size:’10’,pon:’2’&#125;;</span><br><span class="line">//将数据对象转换为查询字符串</span><br><span class="line">console.log(querystring.stringify(date));</span><br><span class="line"></span><br><span class="line">//可以知道键值对分隔符，和键值的关联符</span><br><span class="line">//第二个参数是键值对的分隔符，第三个参数是键值得分隔符。</span><br><span class="line">console.log(qs.stringify(data,<span class="string">';'</span>,<span class="string">':'</span>));</span><br></pre></td></tr></table></figure>
<h2 id="URL模块"><a href="#URL模块" class="headerlink" title="URL模块"></a>URL模块</h2><p>URL模块提供了处理URL中不同部分的相关操作。包含以下三个方法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const url=require(‘url’);</span><br><span class="line">var requestUrl = ’http://tom:123@tedu.cn:8080/news/n1?pno=2<span class="comment">#section3’;</span></span><br><span class="line">//解析出URL中的各组成部分</span><br><span class="line">console.log(url.parse(requestUrl));</span><br><span class="line">//将查询字符串解析为对象</span><br><span class="line">console.log(url.parse(requestUrl,<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line">var urlObj =&#123;</span><br><span class="line">protocol:’http:’,</span><br><span class="line">slashes:<span class="literal">true</span>,auth:’tom:123’,</span><br><span class="line">port:’8080’,</span><br><span class="line">hostname:’tedu.cn’,</span><br><span class="line"><span class="built_in">hash</span>:’<span class="comment">#section3’,</span></span><br><span class="line">query:&#123;pon:’2’&#125;,</span><br><span class="line">pathname:’/news/n1’</span><br><span class="line">&#125;;</span><br><span class="line">console.log(url.format(urlObj));</span><br><span class="line"></span><br><span class="line">var baseUrl=’/project/static/base.html’;</span><br><span class="line">//根据地址解析出相对URL</span><br><span class="line">console.log(url.resolve(baseUrl,’../img/1.jpg’));</span><br></pre></td></tr></table></figure>
<h2 id="Path模块"><a href="#Path模块" class="headerlink" title="Path模块"></a>Path模块</h2><p>Path模块提供了对文件路径进行操作的方法；这些方法只是进行了字符串的相关转换，与文件系统本身没有任何关联。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const path=require(‘path’);</span><br><span class="line">//解析路径字符串</span><br><span class="line">console.log(path.parse(‘C:/user/<span class="built_in">local</span>/img/1.jpg’));</span><br><span class="line"></span><br><span class="line">//将路径对象格式化为字符串</span><br><span class="line">var obj=&#123;dir:’C:/user/<span class="built_in">local</span>/img’,base:’1.jpg’&#125;;</span><br><span class="line">console.log(path.format(obj));</span><br><span class="line">//根据基础路由解析出一个目标路径的绝对路径</span><br><span class="line">console.log(path.resolve(‘htdocs/css’,’../img/news’));</span><br><span class="line">//根据基础路径，获取目标路径与其相对关系</span><br><span class="line">console.log(path.relative(‘htdocs/css’,’htdocs/img.news’));</span><br></pre></td></tr></table></figure>
<h2 id="DNS模块"><a href="#DNS模块" class="headerlink" title="DNS模块"></a>DNS模块</h2><p>DNS模块提供了域名到IP地址的双向解析功能;包含如下三个方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const dns=require(‘dns’);</span><br><span class="line">dns.lookup(‘tmooc.cn’,(err,address,family)=&gt;&#123;</span><br><span class="line">    //把一个域名解析为一个IP地址</span><br><span class="line">    console.log(address);</span><br><span class="line">&#125;)</span><br><span class="line">dns.resolve(‘tmooc.cn’,(err,addresses)=&gt;&#123;</span><br><span class="line">    //把一个域名解析为一个DNS记录解析数组</span><br><span class="line">    console.log(addresses);</span><br><span class="line">&#125;)</span><br><span class="line">dns.reverse(‘60.221.254.230’,(err,hostname)=&gt;&#123;</span><br><span class="line">    //把一个IP地址反向解析为一组域名</span><br><span class="line">    console.log(hostnames);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Util模块"><a href="#Util模块" class="headerlink" title="Util模块"></a>Util模块</h2><p>Util模块提供了若干工具方法，供Node.js其他模块和应用开发者使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const util=require(‘util’);</span><br><span class="line">//使用带占位符的格式化字符串</span><br><span class="line">var data=&#123;</span><br><span class="line">    name:’Cola’,</span><br><span class="line">    proce:2.5,</span><br><span class="line">    isOnsale:<span class="literal">false</span></span><br><span class="line">&#125;;</span><br><span class="line">console.log(</span><br><span class="line">    util.format(</span><br><span class="line">        ‘NAME:%s,PRICE:%d,ISONSALE:%s,JSON:%j’,</span><br><span class="line">        data.name,data.price.data.isOnsale.data</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line">//返回一个对象的字符串形式表示</span><br><span class="line">console.log(util.inspect(data));</span><br></pre></td></tr></table></figure>
<p>使用Util模块还可以实现构造方法间的继承:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const util=require(‘util’);</span><br><span class="line">const EventEmitter=require(‘events’);</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">DBConnection</span></span>()&#123;</span><br><span class="line">    EvenEmitter.call(this);</span><br><span class="line">&#125;</span><br><span class="line">util.inherits(</span><br><span class="line">    DBConnection,</span><br><span class="line">    EvenE,</span><br><span class="line">    Itter</span><br><span class="line">);</span><br><span class="line">var conn=new DBConnection();</span><br><span class="line">console.log(conn instanceof DBConnection);				//<span class="literal">true</span></span><br><span class="line">console.log(conn instanceof EventEmitter);				//<span class="literal">true</span></span><br><span class="line">console.log(DBConnection.super_===EventEmitter);			//<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="Error模块"><a href="#Error模块" class="headerlink" title="Error模块"></a>Error模块</h2><p>Node.js中”错误对象”分为四种类型：</p>
<blockquote>
<ol>
<li>原生JS提供的错误类型,如 EvalError、SyntaxError、RangeError、ReferenceError、TypeError、URIError。</li>
<li>由操作系统底层限制引起的自动错误，如打开不存在的文件、想关闭的流中写出数据；</li>
<li>断言错误；</li>
<li>应用程序抛出的用户自定义错误。<br>Node.js中所有的错误对象都是Error类型的实例，Error对象可用使用throw关键字进行抛出。</li>
</ol>
</blockquote>
<p>错误处理</p>
<p>同步函数调用抛出的错误都是直接使用throw关键字实现的，可用使用try…catch结构进行捕获以进一步的处理；若不处理，将导致程序崩溃。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const fs=require(‘fs’);</span><br><span class="line">//同步函数调用</span><br><span class="line">try&#123;</span><br><span class="line">    var data=fs.readFileSync(‘不存在的文件.txt’);</span><br><span class="line">&#125;</span><br><span class="line">catch&#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>异步函数调用中抛出错误对象不能用try…catch结构进行捕获！错误对象一般作为第一个参数传递给异步回调函数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const fs=require(‘fs’);</span><br><span class="line">//异步函数调用</span><br><span class="line">fs.readFile(‘不存在的.txt’,(err,data)=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        console.log(‘文件读取失败！’,err);</span><br><span class="line">        <span class="built_in">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(“文件内容：”+data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如果异步函数调用发生在一个EventEmitter类型的对象上，产生的错误对象可用通过监听器error事件来处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const net=require(‘net’);</span><br><span class="line">var connection=new.connect(‘192.168.0.100’);</span><br><span class="line">connection.on(‘error’,(err)=&gt;&#123;</span><br><span class="line">    console.log(‘无法连接到目标主机’)；</span><br><span class="line">    <span class="built_in">return</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="包和NPM"><a href="#包和NPM" class="headerlink" title="包和NPM"></a>包和NPM</h3><h2 id="JavaScript的问题"><a href="#JavaScript的问题" class="headerlink" title="JavaScript的问题"></a>JavaScript的问题</h2><p>JavaScript最初的射击目标是运行于客户端控制页面的交互与行为;随着服务器应用的展开，其在下列方面的问题开始展现：</p>
<blockquote>
<ol>
<li>JavaScript没有模块概念。没有原生的密闭作用域支持和依赖管理；</li>
<li>JavaScript没有标准库。缺少IO、Socket、加解密等API标准；</li>
<li>JavaScript没有标准接口。缺少数据库访问的统一接口；</li>
<li>JavaScript没有包管理系统。不能自动加载和安装依赖文件。</li>
</ol>
</blockquote>
<p>由于缺少统一的标准和规范，上述问题限制了服务器端JS更广泛更大规模的应用。</p>
<p>CommonJS规范</p>
<p>CommonJS（<a href="http://www.commonjs.org/）不是一门语言,而是为JS在更广范围的应用定义的API标准和规范，最终提供类似于Python、Ruby和Java语言一样丰富的功能。只要遵循了这些规范，JS编写的应用就可以在任何兼容标准的解释器和主机上运行，从而使得JS可以应用于更广泛的领域" target="_blank" rel="noopener">http://www.commonjs.org/）不是一门语言,而是为JS在更广范围的应用定义的API标准和规范，最终提供类似于Python、Ruby和Java语言一样丰富的功能。只要遵循了这些规范，JS编写的应用就可以在任何兼容标准的解释器和主机上运行，从而使得JS可以应用于更广泛的领域</a>:</p>
<blockquote>
<ul>
<li>服务器端应用</li>
<li>命令行应用</li>
<li>桌面GUI应用</li>
<li>混合应用<br>CommonJS规范目前已有很多实现，如Node.js、Narwhal、Wakanda等，实现了其定义的常用API，以及模块和包的编写、使用和维护规范。</li>
</ul>
</blockquote>
<p>CommonJS包规范</p>
<p>Package：包,是模块的集合，是在模块基础上更深一步的抽象，类似于C/C++的函数库或者Java/.Net的类库。他将特定功能相关的模块封装起来用于发布、更新、依赖管理和版本控制。<br>根据CommonJS包规范<a href="http://wiki.commonjs.org/wiki/Packages/1.1,一个包就是一个目录，内部应该具有如下结构：" target="_blank" rel="noopener">http://wiki.commonjs.org/wiki/Packages/1.1,一个包就是一个目录，内部应该具有如下结构：</a></p>
<blockquote>
<ol>
<li>一个package.json文件位于顶级目录；</li>
<li>在bin目录先保存二进制文件；</li>
<li>在lib目录选保存JS文件；</li>
<li>在doc目录下保存说明文档；</li>
<li>在test目录下保存单元测试文</li>
</ol>
</blockquote>
<p>require和包</p>
<p>Require方法也是CommonJS规范中的一部分，除了可以引入文件模块之外，还可以引入包，其参数就是包的名称:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(<span class="string">'my_package'</span>);</span><br></pre></td></tr></table></figure>
<p>CommonJS规范要求被引入的包应该位于当前目录或者当前目录的父目录下的node_modules目录下，或者NODE_PATH环境变量指定的目录先,require函数由近及远依次查找。</p>
<p>package.json</p>
<blockquote>
<ul>
<li>CommonJS规范规定了用于描述包特征的文件：package.json，内容包括：</li>
<li>name:包名。由小写字母、数组和下划线组成;</li>
<li>main：主文件名称;</li>
<li>description：包说明;</li>
<li>version：版本号;</li>
<li>authors:作者信息数组。每个元素可包含name、email、web属性;</li>
<li>maintainers:包维护者信息数组;</li>
<li>bugs：bug提交地址，网站或邮箱;</li>
<li>licenses:许可证书数组;</li>
<li>repositories：仓库托管地址数组;</li>
<li>keywords：关键字数组;</li>
<li>dependencies：依赖的包;</li>
<li>engines：可以允许的引擎版本;</li>
</ul>
</blockquote>
<h3 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h3><p>根据CommonJS规范,Node.js已经提供了几十个核心模块，但在更广泛的项目应用中，这些模块显得不足；于是第三方组织和个人开发了更多的扩展包：<a href="https://www.npmjs.com/" target="_blank" rel="noopener">https://www.npmjs.com/</a><br>npm:Node package Manager,一个用于下载、安装、查找、更新、删除第三方Node.js包的工具——这些都符合CommonJS包规范；同时，还可以执行打包、发布模块、解决模块间依赖等功能，已经成为Node.js包管理的标准。<br>Node.js的安装文件中，已经集成了NPM包管理工具。</p>
<h2 id="常用的NPM包"><a href="#常用的NPM包" class="headerlink" title="常用的NPM包"></a>常用的NPM包</h2><p>此外，还有一些日常开发者经常使用到的NPM包：</p>
<table>
<thead>
<tr>
<th style="text-align:left">包名</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">color</td>
<td style="text-align:left">命令行彩色输出</td>
</tr>
<tr>
<td style="text-align:left">event-stream</td>
<td style="text-align:left">Stream流操作工具</td>
</tr>
<tr>
<td style="text-align:left">mocha</td>
<td style="text-align:left">单元测试</td>
</tr>
<tr>
<td style="text-align:left">mysql</td>
<td style="text-align:left">连接到MySQL</td>
</tr>
<tr>
<td style="text-align:left">request</td>
<td style="text-align:left">HTTP客户端</td>
</tr>
<tr>
<td style="text-align:left">restify</td>
<td style="text-align:left">RESTfus API搭建</td>
</tr>
<tr>
<td style="text-align:left">socket.io</td>
<td style="text-align:left">WebSocket实时通信</td>
</tr>
<tr>
<td style="text-align:left">xml2js</td>
<td style="text-align:left">XML转换工具</td>
</tr>
</tbody>
</table>
<h2 id="本地安装和全局安装"><a href="#本地安装和全局安装" class="headerlink" title="本地安装和全局安装"></a>本地安装和全局安装</h2><p>将下载的NPM包安装在当前项目工作路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install 包名</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>安装包将保存在npm root命令所指定的目录下。</li>
<li>可以通过require()来引入本地安装的包。</li>
</ul>
</blockquote>
<p>将下载的NPM包安装在全局:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install 包名 -g</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>安装包将保存在npm root -g命令所指定的目录下。</li>
<li>可以直接在交互模式下使用，不能供脚本文件使用。</li>
</ul>
</blockquote>
<h2 id="NPM包维护"><a href="#NPM包维护" class="headerlink" title="NPM包维护"></a>NPM包维护</h2><blockquote>
<ul>
<li>使用npm init命令可以在当前目录下生成一个package.json文件。</li>
<li>使用npm help json命令可以查看package.json文件所有可用的配置选项。</li>
</ul>
</blockquote>
<h2 id="NPM包发布"><a href="#NPM包发布" class="headerlink" title="NPM包发布"></a>NPM包发布</h2><blockquote>
<p>1 如果希望开源自定义的包，可以将其发布到npmjs.org上：<br>2 在<a href="https://www.npmjs.org上注册账号（可以省略）；" target="_blank" rel="noopener">https://www.npmjs.org上注册账号（可以省略）；</a><br>3 使用npm adduser命令注册新账号或者登陆已有账号；<br>4 进入配置完成的包目录，使用npm publish命令发布包；<br>5 到npmjs.org搜索刚刚发布的包。</p>
</blockquote>

                </div>
            </article>
            
                <div id="rewardBox">
    <a href="javascript:;" class="reward-btn"><i class="fa fa-credit-card"></i>打赏支持</a>
    <div id="reward-modal-container">
        <div class="reward-modal-background">
            <div class="reward-modal">
                <p class="reward-quote">
                    <i class="reward-quote-left"></i>
                    <span class="reward-quote-word">如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!</span>
                    <i class="reward-quote-right"></i>
                </p>
                <div class="reward-tab">
                    <a href="javascript:;" class="reward-wechat active" data-index="0">微信</a>
                    <a href="javascript:;" class="reward-alipay" data-index="1">支付宝</a>
                    <img src="http://ziyuan.qikepower.com/wx.png" alt="wechat" class="reward-image active">
                    <img src="http://ziyuan.qikepower.com/zfb.jpg" alt="alipay" class="reward-image">
                </div>
            </div>
        </div>
    </div></div>
            
            
            
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
  var gitalk = new Gitalk({
    // gitalk的主要参数
    clientID: "5b8d35f0aa2ff3fb215f",
    clientSecret: "f2d66b4efccabb319e5c269a201ccfabafe61344",
    repo: "zhaodongming.github.io",
    owner: "zhaodongming",
    admin: '645394545@qq.com',
    id: "Node.js常用原生模块+包和NPM"
  });
  gitalk.render('gitalk-container');
</script>
            
        </div>
        <aside>

            <!--<div class="wxcode">
    <img src="http://ziyuan.qikepower.com/qrcode_for_gh_dc857c884228_430.jpg" alt="">
    <h6 class="text-center">扫码关注个人公众号</h6>
</div>-->
            <!--<div class="flinkBox">
    <div class="fltitle">
        <h2>友情链接</h2>
    </div>
    <div class="fl_list">
        <ul>
            
                <li><a href="https://jdc.jd.com" target="_blank" title="京东设计中心">京东设计中心</a></li>
            
                <li><a href="http://dopro.io/" target="_blank" title="Deep Ocean">Deep Ocean</a></li>
            
                <li><a href="http://fex.baidu.com" target="_blank" title="百度Web前端研发部">百度Web前端研发部</a></li>
            
        </ul>
    </div>
</div>-->
            <div id="navfixed" class="postNav">
    <div class="fltitle">
        <h2>文章目录</h2>
    </div>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-js常用原生模块"><span class="toc-number">1.</span> <span class="toc-text">Node.js常用原生模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Console模块"><span class="toc-number"></span> <span class="toc-text">Console模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OS模块"><span class="toc-number"></span> <span class="toc-text">OS模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Readline模块"><span class="toc-number"></span> <span class="toc-text">Readline模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Query-String模块"><span class="toc-number"></span> <span class="toc-text">Query String模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URL模块"><span class="toc-number"></span> <span class="toc-text">URL模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Path模块"><span class="toc-number"></span> <span class="toc-text">Path模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS模块"><span class="toc-number"></span> <span class="toc-text">DNS模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Util模块"><span class="toc-number"></span> <span class="toc-text">Util模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Error模块"><span class="toc-number"></span> <span class="toc-text">Error模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#包和NPM"><span class="toc-number">1.</span> <span class="toc-text">包和NPM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript的问题"><span class="toc-number"></span> <span class="toc-text">JavaScript的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NPM"><span class="toc-number">1.</span> <span class="toc-text">NPM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用的NPM包"><span class="toc-number"></span> <span class="toc-text">常用的NPM包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本地安装和全局安装"><span class="toc-number"></span> <span class="toc-text">本地安装和全局安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NPM包维护"><span class="toc-number"></span> <span class="toc-text">NPM包维护</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NPM包发布"><span class="toc-number"></span> <span class="toc-text">NPM包发布</span></a>
</div>
        </aside>

    </div>
</section>
<div class="backtop" id="backTop" style="display: block;">
    <i class="fa fa-long-arrow-up"></i>
</div>
</main>
<footer id="footer">
    <div class="container">
        <p> 由
            <a href="http://hexo.io/" target="_blank">Hexo</a>
            和
            <a href="https://github.com/zhaodongming/hexo-theme-baozi" target="_blank">Hexo-theme-baozi</a> 提供支持
        </p>
        <p id="copyRightEn">版权所有 © 2013 - 2019 明 All Rights Reserved.</p>
        <p class="busuanzi_uv">
            访客数 : <span id="busuanzi_value_site_uv"></span> |
            访问量 : <span id="busuanzi_value_site_pv"></span>
        </p>
    </div>
</footer>
<script src="/js/jquery.js"></script>
<script src="/js/main.js"></script>
<script src="/js/busuanzi.pure.mini.js"></script>
<script src="/js/bootstrap.min.js"></script>
</body>
</html>